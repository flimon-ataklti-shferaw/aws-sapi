<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd">
	<error-handler name="global-error-handler" doc:id="022838e4-6c30-4fec-9a06-358f2dbd9388" >
<on-error-propagate type="APIKIT:BAD_REQUEST" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="a3e3e174-a066-4086-89e5-6d283b7505fb" >
			<set-variable value="#[400]" doc:name="Set HTTP Status - 400" doc:id="94013696-8fc9-40bd-8cbf-eb2b20622154" variableName="httpStatus"/>
			<set-variable value='Bad request' doc:name="set Error Message" doc:id="3e9d136d-2c52-451c-b34d-d0330145a194" variableName="errorMessage"/>
			<set-variable value='#[(((error.description default "" replace "[" with "") replace "]" with "") splitBy "\n")]' doc:name="Set Error Description" doc:id="aaa3f4f1-add3-4e61-9e1a-46d7cb14636c" variableName="errorDescription"/>
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="6c5031ba-afcf-4180-82da-0cead0258c89" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate> 
		<on-error-propagate type="APIKIT:METHOD_NOT_ALLOWED" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="316c47b1-a68a-4db6-b1f4-5e7820ba1e2a" >
			<set-variable value="#[405]" doc:name="Set HTTP Status - 405" doc:id="db0de673-5daa-4ccb-90d2-8d888c66099c" variableName="httpStatus" />
			<set-variable value='Method Not Allowed' doc:name="Set Error Message" doc:id="9ef17f7b-9310-4d2e-9938-c8a4b67813ab" variableName="errorMessage"/>
			<set-variable value="The method specified in the request is not allowed for this resource" doc:name="Set Error Description" doc:id="f573ee86-32c3-45a4-af71-3bfbe114c73b" variableName="errorDescription"/>
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="e9fd3ad9-9582-47cb-b407-bf72611fb60f" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="APIKIT:NOT_ACCEPTABLE" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="4f45a561-1285-4699-9de1-df4c9b617393" >
			
<set-variable value="#[406]" doc:name="Set HTTP Status - 406" doc:id="9b4f507d-d29f-4f3a-a88d-753647d83ef7" variableName="httpStatus" />
      
<set-variable value="Not Acceptable" doc:name="Set Error Message" doc:id="1c0c306a-67d4-45e4-9ece-dad6db2341cf" variableName="errorMessage"/>
			
<set-variable value="The resource identified by the request is not capable of generating response entities according to the request accept headers" doc:name="Set Error Description" doc:id="644050f6-79f9-4937-8363-fc2464dbe15b" variableName="errorDescription"/>
			
<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="33e14c7e-3604-4e0e-819a-59249f140f4c" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="APIKIT:NOT_FOUND" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="ecd6373a-6558-4675-bbe3-1078c8447b39" >
			<set-variable value="#[404]" doc:name="Set HTTP Status - 404" doc:id="ea1daf38-51f1-4912-a5cb-3e8a9a4ebde5" variableName="httpStatus" />
			<set-variable value="Not found" doc:name="Set Error Message" doc:id="ed95af30-e0fc-49eb-ad54-b2a9d34c6de3" variableName="errorMessage"/>
			<set-variable value="The server has not found anything matching the Request-URI" doc:name="Set Error Description" doc:id="0d0c9136-d78d-423f-b78d-fd04ec803f1e" variableName="errorDescription"/>
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="94238260-0133-4ddd-9469-018ce8ceabb2" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="APIKIT:UNSUPPORTED_MEDIA_TYPE" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="ea72b22e-d9c5-45cd-a0a3-b1344861711d" >
			<set-variable value="#[415]" doc:name="Set HTTP Status - 415" doc:id="21e8fd99-4108-4118-8bb2-f88cc8bf16dd" variableName="httpStatus" />

      <set-variable value="Unsupported media type" doc:name="Set Error Message" doc:id="d00a1128-0b44-4a5e-b310-415e6ce561cf" variableName="errorMessage"/>

			<set-variable value="The server is refusing to service the request because the entity of the request is in a format not supported by the requested resource for the requested method" doc:name="Set Error Description" doc:id="04bb7331-09c3-4a72-9c9c-84ca51d51f76" variableName="errorDescription"/>
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="4bf187ad-8727-4611-bdae-0c8b3d066013" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>	
		<!-- DB Related issues -->
		<!-- HTTP Requster Related error handling -->	
		<on-error-propagate type="HTTP:BAD_REQUEST" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="ac65b181-7048-4616-88a1-719c6d5b3c23" >
			<set-variable value="#[400]" doc:name="Set HTTP Status - 400" doc:id="f58278f9-dabe-4c57-968f-b7b2134dd518" variableName="httpStatus" />

      <set-payload value="#[error.muleMessage.payload]" doc:name="Set Payload" doc:id="2883f3b8-7660-47c7-a960-0b5e20eeb177" />
		</on-error-propagate>
		<on-error-propagate type="HTTP:FORBIDDEN" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="3fa6fc22-6e6e-4161-8ee3-c714f7e5d102" >
			<set-variable value="#[403]" doc:name="Set HTTP Status - 403" doc:id="8ea2f1a8-fb97-45a1-ad57-3578f975758e" variableName="httpStatus" />
      <set-variable value="Access to the upstream service is forbidden." doc:name="Set Error Message" doc:id="6aeca9bf-6cb3-4d84-94b1-a30b5ef1549a" variableName="errorMessage"/>
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="dcda69db-d645-4b48-b72f-b2a8ff7d4e0f" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:CLIENT_SECURITY" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="35d2b502-9cc3-4826-8626-72a0a499c9ff" >
			<set-variable value="#[401]" doc:name="Set HTTP Status - 401" doc:id="47406a65-6358-4585-af05-0c8a76739861" variableName="httpStatus" />
			<set-payload value="#[error.muleMessage.payload]" doc:name="Set Payload" doc:id="a6139ddf-b9c8-4ba5-aa10-84f65426d666" />
		
</on-error-propagate>
		<on-error-propagate type="HTTP:CONNECTIVITY" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="5e3bbdab-e10e-4812-a4d6-eb2e883de615" >
			<set-variable value="#[503]" doc:name="Set HTTP Status - 503" doc:id="cdb2bc54-154b-4cad-ab0d-6840ff9e76a1" variableName="httpStatus" />
      <set-variable value="Service unavailable" doc:name="Set Error Message" doc:id="3f479ec3-1f06-4acb-884a-e31b2cc742c8" variableName="errorMessage" />
			<set-variable value="The (upstream) service is temporarily not available " doc:name="Set errorDescription" doc:id="552b2c7e-78b7-4e07-8622-8039acc1b3de" variableName="errorDescription"/>
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="4381c4ab-ecfa-4e19-aa06-3d5e795ed934" name="global-prepare-error-response-sub-flow"/>
		
</on-error-propagate>
		<on-error-propagate type="HTTP:INTERNAL_SERVER_ERROR" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="0fe4b726-0262-475a-a03a-609f60febb80" >
			<set-variable value="#[500]" doc:name="Set HTTP Status - 500" doc:id="15e4d3f2-328b-4bb5-9fb6-25c076c0a526" variableName="httpStatus" />

      <logger level="INFO" doc:name="Logger" doc:id="f526c123-1a39-4afd-98ce-770f6e519f37" message="kom ik hier"/>

			<set-variable value="Upstream service unable to fulfil request." doc:name="Set Error Message" doc:id="22ccaebf-0273-498f-ac24-df934b6124ed" variableName="errorMessage"/>

			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="9c03832b-1d58-4614-8920-e9724f4c73b9" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:METHOD_NOT_ALLOWED" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="6189ca9d-9617-4044-a095-ba435817185c" >
			<set-variable value="#[405]" doc:name="Set HTTP Status - 405" doc:id="df8cb937-d880-4107-aa9e-576da8874846" variableName="httpStatus" />
      <set-variable value="The method specified in the request is not allowed for this resource" doc:name="Set Error Message" doc:id="a19e1448-fc60-49f5-aed1-2c17135cdd1a" variableName="errorMessage"/>
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="9539b9d0-74e9-47ee-b24d-fc2e6fa89b76" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:NOT_ACCEPTABLE" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="ba15b668-7840-48ce-9117-7193d46571a2" >
			<set-variable value="#[406]" doc:name="Set HTTP Status - 406" doc:id="a4e00fc5-4453-4bc6-b1c6-739740961bcd" variableName="httpStatus" />
      <flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="4b9c3c9b-b699-4a85-ac10-59c17820b7e0" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:NOT_FOUND" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="2237a7ec-db37-46fe-9cac-87eb9048d632" >
			<set-variable value="#[404]" doc:name="Set HTTP Status - 404" doc:id="8d7e4c6e-9bf5-44d3-8dd2-f6d045913534" variableName="httpStatus" />
      <set-variable value="The server has not found anything matching the Request-URI" doc:name="Set Error Message" doc:id="319ad1d9-5f2b-416b-b202-5573c97834c8" variableName="errorMessage"/>
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="458a9eee-1a79-48e7-89b4-25aab9e13ab8" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:PARSING" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="17b5f7db-12c5-4e73-900e-a71272c1dcec" >
			<set-variable value="#[400]" doc:name="Set HTTP Status - 400" doc:id="6d2768e1-0c7c-43e6-a48d-d36c5d5f9771" variableName="httpStatus" />
      <flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="43970277-7b1a-4d1c-a953-303f3b20d20e" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:RETRY_EXHAUSTED" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="aa0f48be-ccc8-49de-8005-3dbf19d016b3" >
			<set-variable value="#[503]" doc:name="Set HTTP Status - 503" doc:id="e98a2277-7e8b-4da2-9800-7fe0a444310d" variableName="httpStatus" />
      <flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="7cccb546-4276-4cd6-b9e3-de309513fe01" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:SECURITY" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="67237020-9efb-488d-8d08-2d2d88e0bcc6" >
			<set-variable value="#[401]" doc:name="Set HTTP Status - 401" doc:id="470f651f-21e5-4f92-b584-bf0cb86989fc" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="a2f119b9-cafc-414d-b9fb-ceb12e684f95" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:TIMEOUT" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="cc8fe645-c06c-4680-9d37-8a955acf8db9" >
			<set-variable value="#[504]" doc:name="Set HTTP Status - 504" doc:id="988c3b50-35de-459b-aabc-a38947d974e1" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="b33537c3-9f91-41f0-929f-27089d104e1c" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:TOO_MANY_REQUESTS" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="73209db7-d85f-447f-902c-989fcfa27ec9" >
			<set-variable value="#[429]" doc:name="Set HTTP Status - 429" doc:id="3aaba57b-17d9-4658-8f34-f5af067586bd" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="610dc753-9d6b-4b4f-a51c-d66b791684c2" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:UNAUTHORIZED" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="95ad84e7-89c2-4729-ba25-f7f9115f49f3" >
			<set-variable value="#[403]" doc:name="Set HTTP Status - 403" doc:id="28476e73-8452-4905-83f8-34dbb3b22d0c" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="ef392b47-7f92-4254-bf83-a25d403d225c" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="HTTP:UNSUPPORTED_MEDIA_TYPE" enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="3cff36e3-90d7-4de1-b8cd-b07e463fd1f7" >
			<set-variable value="#[415]" doc:name="Set HTTP Status - 415" doc:id="2a0ff9b6-02ea-40b8-91ea-612873ea6866" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="dd598676-dfc8-4197-941d-ce701e2d9963" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		










		<!-- Streaming related exception -->
		<on-error-propagate type="STREAM_MAXIMUM_SIZE_EXCEEDED" enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="7382958f-e664-4f5b-9a1f-f178e460a322" >
			<set-variable value="#[500]" doc:name="Set HTTP Status - 500" doc:id="77f02870-3bbd-467c-b0eb-bfd0c965bbd1" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="52a5de96-01c0-4b8f-a2cc-ce18389afc22" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<!-- Generic CONNECTIVITY Related Exception handling start. Order matters -->
		<on-error-propagate type="RETRY_EXHAUSTED" enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="652546e0-a4d1-427e-98f9-2d88b5f0a906" >
			<set-variable value="#[503]" doc:name="Set HTTP Status - 503" doc:id="2510127c-f688-4136-8c94-3b71e802bced" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="9fb41e21-dc4a-4310-937e-8b86c0d079d9" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="REDELIVERY_EXHAUSTED" enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="6aab05a7-9623-4d2b-b63e-97ecd27b5334" >
			<set-variable value="#[503]" doc:name="Set HTTP Status - 503" doc:id="72ae5c33-51bf-494d-a82e-67041cc6ba02" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="475b8198-61ce-40e3-9205-d5740e79b6c1" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="CONNECTIVITY" enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="e567809b-140e-4f44-80cf-1ac9aa2b57f0" >
			<set-variable value="#[503]" doc:name="Set HTTP Status - 503" doc:id="e446d959-579d-4c19-a861-a2ba9d4da3df" variableName="httpStatus" />
      			<set-variable value="Service unavailable" doc:name="Set vErrorMessage" doc:id="26bb5f97-5837-4dbf-a114-b9bb228d5941" variableName="errorMessage"/>
			<set-variable value="The (upstream) service is temporarily not available " doc:name="Set vErrorDescription" doc:id="686289b3-de06-499c-8221-23efcdce4e92" variableName="errorDescription"/>
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="5ffbf835-ed66-4cfd-baae-a1b62b9f0201" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>






		<on-error-propagate type="TIMEOUT" enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="3a522e7e-18f3-44d5-b111-a866a15374c4" >
			<set-variable value="#[504]" doc:name="Set HTTP Status - 504" doc:id="a29dd8b7-af0c-4cd3-bbff-f079e8d109a0" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="443ac6fa-1c96-43d1-861e-4fef90981b9c" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<!-- Generic CONNECTIVITY Exception handling end -->
		<on-error-propagate type="TRANSFORMATION" enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="b98b66af-a500-48f3-a398-c2bf85bfb166" >
			<set-variable value="#[400]" doc:name="Set HTTP Status - 400" doc:id="ce9c4fd2-7699-418e-a153-c2fb69df849e" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="04f7c9e1-703e-4550-8d55-f077127ea33e" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="EXPRESSION" enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="0fc5232a-90b5-4152-8287-a242a7c5aa69" >
			<set-variable value="#[500]" doc:name="Set HTTP Status - 500" doc:id="eca60a24-3ead-4cec-b235-e069ffe94230" variableName="httpStatus" />
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="146aedf8-e10e-4efa-9265-17ac955fdaaf" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>	
		<on-error-propagate type="ROUTING" enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="6e134dc6-a621-43db-ab36-e38d42b8c518" >
			<set-variable value="#[400]" doc:name="Set HTTP Status - 400" doc:id="62a1f8e7-c2bf-4e68-a114-382e5f8ea8d0" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="3ca3a4b7-bdee-4153-9c92-68571109bb23" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<on-error-propagate type="SECURITY" enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="5a579116-016e-4e94-8f9e-2e7cb6362165" >
			<set-variable value="#[401]" doc:name="Set HTTP Status - 401" doc:id="d2a1a7ae-cf63-461e-9291-548e8e48175a" variableName="httpStatus" />
      			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="4316ea17-f1cc-42dc-a28c-e1e60cf44175" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
		<!-- If none of the above matches then handle a the exception using generic handler -->
		<on-error-propagate type="ANY" enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="8d446846-9e72-46a6-909e-b1a6f1237a5c">
			<set-variable value="#[500]" doc:name="Set HTTP Status - 500" variableName="httpStatus"/>
			<set-variable value="Internal server error" doc:name="Set Error Message" doc:id="30a3beb5-69fc-4784-b224-e10676f5ccc4" variableName="errorMessage"/>
			<set-variable value="The server encountered an unexpected condition which prevented it from fulfilling the request" doc:name="errorDescription" doc:id="e0b4a70c-3561-4871-bef6-8c6c9b624f5e" variableName="errorDescription"/>
			<flow-ref doc:name="global-prepare-error-response-sub-flow" doc:id="4b4f7335-da6b-4ac3-be5b-8cf60da5ca7b" name="global-prepare-error-response-sub-flow"/>
		</on-error-propagate>
</error-handler>
    <sub-flow name="global-prepare-error-response-sub-flow" doc:id="d19c1534-c216-47d5-820d-6ef8189aac0f">
		<ee:transform doc:name="Init Variables" doc:id="93ac8ad2-7ba6-4649-98e5-492363a73424" >
			<ee:message>
			</ee:message>
			<ee:variables>
				<ee:set-variable variableName="errorRaised"><![CDATA[%dw 2.0
output application/java
---
true]]></ee:set-variable>
				<ee:set-variable variableName="errorDescription"><![CDATA[%dw 2.0
output application/java
---
if(vars.errorDescription?) 
	vars.errorDescription 
else 
	error.exception.detailMessage]]></ee:set-variable>
				<ee:set-variable variableName="logCategory"><![CDATA[%dw 2.0
output application/java
---
'Exception']]></ee:set-variable>
				<ee:set-variable variableName="logLevel"><![CDATA[%dw 2.0
output application/java
---
'ERROR']]></ee:set-variable>
			</ee:variables>
		</ee:transform>

		<ee:transform doc:name="Error Response" doc:id="069ae9a6-bd8b-45af-96dc-7c426d15d06c" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/json encoding="UTF-8", skipNullOn="everywhere"
var errors = (((error.description default "" replace "Error validating JSON. Error: - " with "") replace "- " with "") splitBy "\n")
---
{
	code : vars.httpStatus,
	message : if(vars.errorMessage != null) vars.errorMessage else (error.errorType.identifier),
	description: if(vars.errorDescription != null) vars.errorDescription else error.description,
	dateTime : now() as String { format: "yyyy-MM-dd'T'HH:mm:ss'Z'" },
	transactionId : vars.transactionId
}
]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<logger level="INFO" doc:name="Error Log" doc:id="30318f78-1155-4cf5-9d1a-7d3ce67c3475" message="Transaction [#[vars.transactionId]] - Error Code [#[vars.httpStatus]] - Error Message [#[error.errorType.identifier default '']] - Error Description [#[error.description default '']]"/>
	</sub-flow>
</mule>